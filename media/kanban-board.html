<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src {{cspSource}} https: data:; style-src {{cspSource}}; script-src {{cspSource}} 'nonce-{{nonce}}'; worker-src {{cspSource}};">
  <title>Kanban Board Viewer</title>
  <link rel="stylesheet" href="{{styleUri}}">
</head>
<body>
  <header>
    <h1 id="board-title">Kanban Board</h1>
    <div class="header-actions">
      <input type="search" class="search-input" id="search" placeholder="Filter tasks...">
      <button id="refresh-btn">Refresh</button>
      <button id="new-task-btn">New Task</button>
      <button id="select-dir-btn">Select Board Directory</button>
    </div>
  </header>

  <div class="loading" id="loading">
    <p>Loading board...</p>
  </div>

  <div class="error" id="error"></div>

  <div id="setup-container"></div>

  <div id="board"></div>

  <div class="modal" id="task-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="modal-title">Edit Task</h2>
        <button class="close-btn" id="close-modal">&times;</button>
      </div>
      <form id="task-form">
        <div class="form-group">
          <label class="form-label" for="task-title-input">Title</label>
          <input type="text" class="form-input" id="task-title-input" required>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="task-assigned">Assigned</label>
            <input type="text" class="form-input" id="task-assigned">
          </div>
          <div class="form-group">
            <label class="form-label" for="task-progress">Progress (%)</label>
            <input type="number" class="form-input" id="task-progress" min="0" max="100">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="task-due">Due Date</label>
            <input type="datetime-local" class="form-input" id="task-due">
          </div>
          <div class="form-group">
            <label class="form-label" for="task-tags">Tags (comma-separated)</label>
            <input type="text" class="form-input" id="task-tags">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label" for="task-content">Content (Markdown)</label>
          <textarea class="form-textarea" id="task-content" required></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" id="cancel-btn">Cancel</button>
          <button type="submit" class="btn-primary">Save Task</button>
        </div>
      </form>
    </div>
  </div>

  <script nonce="{{nonce}}" src="{{scriptUri}}"></script>
</body>
</html>
